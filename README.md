# Бот для голосования 

P.S. Задание выполнено на языке Python, так как я не владею языком Go на достаточном уровне для написания задания, а в требованиях на стажировку был выбор между Python и Go. Я пробовала писать в поддержку, насчет возможности вполнить задание на Python, но мне не ответили. Поэтому я решила попробовать выполнить задание, так как выполнить его (пусть и на другом языке) лучше, чем ничего не сделать или вообще не довести его до конца.

Бот для голосования внутри чатов мессенджера Mattermost.

### Функционал:

* Создание голосования. 

Пользователь может создать голосование с несколькими вариантами.

Для этого необходимо в запрос "/create" ввести текст для голосования, варианты и автора голосования.
В результате будет возвращен ID голосования и созданные варианты.

* Голосование.

Любой пользователь может проголосовать за интересующий его вариант ответа.

Для этого необходимо в запрос "/vote" отправить ID голосования, свой вариант голоса и имя пользователя, который отправил голос.

* Просмотр результатов.

Любой пользователь может запросить результаты голосования.

Для этого необходимо в запрос "/get_result" отправить ID голосования, после чего можно будет получить голосование с результатами для каждого варианта, его автора и состояние на момент запроса (открыто оно или нет).

* Завершение голосования.

Создатель голосования может закрыть его досрочно.

Для этого достаточно выполнить запрос "/close" с ID голосования от автора голосования.

* Удаление голосования.

Голосование может быть удалено.

Для этого достаточно выполнить запрос "/delete" с ID голосования от автора голосования.


Технические особенности

* Написан на языке Python, с использованием Flask
* В качестве хранилища данных испоьзуется Tarantool.

### Инструкция

Требования:

Для развертывания машина должна иметь Docker, чтобы была возможность запускать Dockerfile и docker-compose.yml.

1. Склонируйте репозиторий

Для этого необходимо выполнить в терминале в небходимой для этого директории 
```
git clone git@github.com:KatrinaVl/vk_bot.git
```

2. Запустите бота.

Для того чтобы бот начал работать и принимать запросы на голосования, необходимо собрать микросервисы для бота и для хранилища. 

Это делается с помощью команды:
```
docker-compose build
```

После этого, будут добавлены все необходимые пакеты, и можно будет запускать бота:
```
docker-compose up
```

Теперь бот запущен и готов принимать запросы.

3. Отключение тестов.

Тесты для бота написаны как отдельный микросервис, для того, чтобы не надо было отдельно запускать бота и потом запускать тесты. Поэтому как только выполнится команда для запуска бота, тесты сразу же будут приведены в исполнение.

Чтобы убрать их достаточно закомментировать (или полностью убать) часть для тестов в docker-compose.yml :

```
#    tests:
#        build:
#            context: tests
#        environment:
#            BOT_SERVER_URL: "http://bot:8090"
```

